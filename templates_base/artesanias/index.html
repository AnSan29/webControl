<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ site_name or "Artesan√≠as Locales" }}</title>
    <meta name="description" content="{{ site_description or 'Artesan√≠as hechas a mano con identidad Wayuu' }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link id="fontawesome-cdn" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1Befh3Q4omPavGJ5WmX04jsnXpixK8fN0FFJw53sG7CkJ7C0JpShyp6EkGj3/9u7Q==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            try {
                if (document.fonts && document.fonts.check('1em "Font Awesome 6 Free"')) {
                    return;
                }
            } catch (err) {
                // If document.fonts.check throws, continue to fallback.
            }

            var fallback = document.createElement('link');
            fallback.rel = 'stylesheet';
            fallback.href = 'https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css';
            fallback.crossOrigin = 'anonymous';
            fallback.referrerPolicy = 'no-referrer';
            document.head.appendChild(fallback);
        });
    </script>
    <style>
            :root {
                --primary: {{ primary_color or palette.primary or '#8B5E3C' }};
                --secondary: {{ secondary_color or palette.secondary or '#CBB67C' }};
                --accent: {{ palette.accent or '#E6B17E' }};
                --neutral: {{ palette.neutral or '#FDF8F2' }};
                --surface: #fffaf5;
                --text: #1f140f;
                --muted: #5c4c3f;
                --muted-light: #7c6a5b;
            }

            * {
                box-sizing: border-box;
            }

            body {
                margin: 0;
                font-family: 'Montserrat', sans-serif;
                color: var(--text);
                background-image: linear-gradient(180deg, var(--neutral), #f6eadf);
                line-height: 1.65;
            }

            h1, h2, h3, h4 {
                font-family: 'Playfair Display', serif;
                color: var(--primary);
                margin: 0;
            }

            img {
                max-width: 100%;
                display: block;
            }

            a {
                color: inherit;
            }

            .container {
                width: min(1180px, 90%);
                margin: 0 auto;
            }

            header {
                position: sticky;
                top: 0;
                z-index: 1000;
                background: rgba(250, 244, 237, 0.95);
                backdrop-filter: blur(12px);
                box-shadow: 0 8px 30px rgba(0,0,0,0.07);
            }

            .nav {
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 1.5rem;
                padding: 1rem 0;
            }

            .brand {
                display: flex;
                align-items: center;
                gap: 1rem;
                text-decoration: none;
            }

            .brand h1 {
                font-size: clamp(1.5rem, 2vw, 1.9rem);
                color: var(--primary);
            }

            .logo-img {
                width: clamp(48px, 6vw, 64px);
                height: clamp(48px, 6vw, 64px);
                object-fit: contain;
            }

            .logo-placeholder {
                width: clamp(48px, 6vw, 64px);
                height: clamp(48px, 6vw, 64px);
                border-radius: 50%;
                display: grid;
                place-items: center;
                background: var(--secondary);
                color: var(--primary);
                font-size: clamp(1.5rem, 2vw, 1.8rem);
            }

            nav ul {
                display: flex;
                align-items: center;
                gap: clamp(0.75rem, 2vw, 2rem);
                list-style: none;
                padding: 0;
                margin: 0;
            }

            nav a {
                text-decoration: none;
                color: var(--muted);
                font-weight: 500;
                position: relative;
                padding-bottom: 0.2rem;
            }

            nav a::after {
                content: "";
                position: absolute;
                left: 0;
                bottom: 0;
                width: 0;
                height: 2px;
                background: var(--primary);
                transition: width 0.3s;
            }

            nav a:hover::after,
            nav a:focus-visible::after {
                width: 100%;
            }

            .hero {
                position: relative;
                padding: clamp(6rem, 12vw, 10rem) 0 clamp(4rem, 8vw, 6rem);
                color: #fff;
                text-align: center;
                overflow: hidden;
            }

            .hero::before {
                content: "";
                position: absolute;
                inset: 0;
                background-image:
                    linear-gradient(120deg, rgba(15,12,10,0.82), rgba(139, 94, 60, 0.62)),
                    url('{{ normalize_drive_image(hero_image) if hero_image else "https://images.unsplash.com/photo-1521540216272-a50305cd4421?auto=format&fit=crop&w=1600&q=80" }}');
                background-size: cover;
                background-position: center;
                filter: contrast(1.05);
                z-index: -2;
            }

            .hero::after {
                content: "";
                position: absolute;
                inset: 0;
                background: radial-gradient(circle at top, rgba(255,255,255,0.15), transparent 55%);
                z-index: -1;
            }

            .hero-content {
                width: min(820px, 92%);
                margin: 0 auto;
                display: grid;
                gap: clamp(1rem, 3vw, 1.8rem);
            }

            .hero h2 {
                font-size: clamp(2.2rem, 5vw, 3.5rem);
                color: #fff;
            }

            .hero p {
                font-size: clamp(1rem, 2.3vw, 1.3rem);
                color: rgba(255,255,255,0.85);
            }

            .hero-actions {
                display: flex;
                justify-content: center;
                flex-wrap: wrap;
                gap: 1rem;
            }

            .btn {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                gap: 0.6rem;
                padding: 0.85rem 1.9rem;
                border-radius: 999px;
                border: 2px solid transparent;
                font-weight: 600;
                text-decoration: none;
                transition: transform 0.25s, box-shadow 0.25s, background-color 0.25s, color 0.25s;
            }

            .btn-primary {
                background: var(--secondary);
                color: var(--primary);
                box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            }

            .btn-outline {
                border-color: rgba(255,255,255,0.7);
                color: #fff;
                background: transparent;
            }

            .btn-whatsapp {
                background: #25D366;
                color: #fff;
                box-shadow: 0 15px 35px rgba(37, 211, 102, 0.25);
            }

            .btn-whatsapp svg {
                width: 18px;
                height: 18px;
                fill: currentColor;
            }

            .btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 18px 38px rgba(0,0,0,0.15);
            }

            section {
                padding: clamp(3.5rem, 7vw, 5rem) 0;
            }

            section:nth-of-type(even) {
                background: rgba(255, 255, 255, 0.65);
            }

            .section-header {
                text-align: center;
                margin-bottom: clamp(2.5rem, 6vw, 4rem);
            }

            .section-header span {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                gap: 0.4rem;
                padding: 0.3rem 0.9rem;
                border-radius: 999px;
                background: rgba(203, 182, 124, 0.18);
                color: var(--primary);
                font-size: 0.85rem;
                font-weight: 600;
                letter-spacing: 0.05em;
            }

            .section-header h2 {
                font-size: clamp(2rem, 4vw, 2.8rem);
                margin: 1rem 0 0.6rem;
            }

            .section-header p {
                width: min(640px, 90%);
                margin: 0 auto;
                color: var(--muted-light);
            }

            .about-grid {
                display: grid;
                gap: clamp(2rem, 6vw, 4rem);
                align-items: center;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }

            .about-media {
                position: relative;
            }

            .about-media::after {
                content: "";
                position: absolute;
                inset: clamp(1.4rem, 5vw, 2.5rem);
                border: 1px solid rgba(139, 94, 60, 0.2);
                border-radius: 24px;
                z-index: -1;
            }

            .about-media img {
                border-radius: 24px;
                aspect-ratio: 4 / 5;
                object-fit: cover;
                box-shadow: 0 18px 45px rgba(0,0,0,0.18);
            }

            .about-content {
                display: grid;
                gap: 1.2rem;
            }

            .about-highlight {
                background: rgba(255,255,255,0.85);
                border-left: 4px solid var(--secondary);
                padding: 1.1rem 1.5rem;
                border-radius: 0 18px 18px 0;
                color: var(--muted);
                font-style: italic;
            }

            .products-grid {
                display: grid;
                gap: clamp(1.5rem, 4vw, 2.2rem);
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }

            .product-card {
                background: #fff;
                border-radius: 24px;
                overflow: hidden;
                box-shadow: 0 15px 40px rgba(0,0,0,0.08);
                display: grid;
                grid-template-rows: auto 1fr;
            }

            .product-image {
                position: relative;
                aspect-ratio: 4 / 3;
                overflow: hidden;
            }

            .product-image img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                transition: transform 0.35s ease;
            }

            .product-card:hover .product-image img {
                transform: scale(1.05);
            }

            .product-body {
                padding: 1.6rem;
                display: grid;
                gap: 0.9rem;
            }

            .product-body p {
                color: var(--muted);
            }

            .product-meta {
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 0.5rem;
                font-weight: 600;
                color: var(--primary);
            }

            .gallery-grid {
                display: grid;
                gap: 0.85rem;
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            }

            .gallery-card {
                position: relative;
                border-radius: 18px;
                overflow: hidden;
                aspect-ratio: 3 / 2;
                max-height: 220px;
                box-shadow: 0 12px 26px rgba(0,0,0,0.08);
            }

            .gallery-card img {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }

            .gallery-card span {
                position: absolute;
                inset: 0;
                display: grid;
                place-items: center;
                font-size: 2.4rem;
                color: rgba(255,255,255,0.75);
                background: linear-gradient(135deg, rgba(19,17,14,0.75), rgba(139,94,60,0.55));
            }

            .contact-grid {
                display: grid;
                gap: clamp(2rem, 5vw, 3rem);
                grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            }

            .contact-card {
                background: #fff;
                border-radius: 24px;
                padding: clamp(1.5rem, 4vw, 2rem);
                box-shadow: 0 18px 45px rgba(0,0,0,0.08);
                display: grid;
                gap: 1.1rem;
            }

            .contact-row {
                display: flex;
                align-items: center;
                gap: 0.9rem;
                color: var(--muted);
                word-break: break-word;
            }

            .contact-icon {
                width: 40px;
                height: 40px;
                border-radius: 12px;
                background: rgba(139, 94, 60, 0.15);
                display: grid;
                place-items: center;
                color: var(--primary);
                font-size: 1.1rem;
                line-height: 1;
            }

            .socials {
                display: flex;
                flex-wrap: wrap;
                gap: 0.75rem;
            }

            .socials a {
                width: 42px;
                height: 42px;
                border-radius: 50%;
                display: grid;
                place-items: center;
                background: rgba(139, 94, 60, 0.12);
                color: var(--primary);
                transition: transform 0.25s, background 0.25s;
            }

            .socials svg {
                width: 20px;
                height: 20px;
                fill: currentColor;
            }

            .map-card {
                margin-top: 2rem;
                border-radius: 24px;
                overflow: hidden;
                box-shadow: 0 15px 35px rgba(0,0,0,0.15);
                border: 1px solid rgba(139, 94, 60, 0.15);
            }

            .map-card iframe {
                width: 100%;
                border: 0;
                height: clamp(260px, 40vw, 360px);
                display: block;
            }

            .map-card .map-footer {
                background: #fff;
                padding: 0.9rem 1.2rem;
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 1rem;
                flex-wrap: wrap;
            }

            .map-card .map-footer a {
                color: var(--primary);
                font-weight: 600;
                text-decoration: none;
            }

            .socials a:hover {
                transform: translateY(-3px);
                background: var(--secondary);
            }

            footer {
                background: linear-gradient(120deg, rgba(19,17,14,0.95), rgba(79,52,33,0.95));
                color: rgba(255,255,255,0.9);
                padding: clamp(2.5rem, 6vw, 3.5rem) 0;
            }

            footer .container {
                display: grid;
                gap: 2.2rem;
                text-align: center;
            }

            .supporters {
                display: grid;
                gap: 1rem;
            }

            .supporters h3 {
                margin: 0;
                font-size: 1.1rem;
                letter-spacing: 0.08em;
                color: rgba(255,255,255,0.92);
            }

            .supporters-logos {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 1rem;
            }

            .supporter-badge {
                width: clamp(110px, 20vw, 160px);
                height: 72px;
                border-radius: 12px;
                background: rgba(255,255,255,0.08);
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 0.5rem 0.75rem;
                box-shadow: 0 10px 25px rgba(0,0,0,0.25);
                position: relative;
            }

            .supporter-badge img {
                max-width: 100%;
                max-height: 52px;
                object-fit: contain;
                filter: drop-shadow(0 4px 15px rgba(0,0,0,0.25));
                transition: transform 0.25s ease;
            }

            .supporter-badge:hover img {
                transform: scale(1.03);
            }

            .supporter-fallback {
                display: none;
                width: 100%;
                height: 100%;
                align-items: center;
                justify-content: center;
                font-weight: 600;
                letter-spacing: 0.08em;
                text-transform: uppercase;
                color: rgba(255,255,255,0.9);
            }

            .whatsapp-btn {
                position: fixed;
                right: 1.5rem;
                bottom: 1.5rem;
                width: 56px;
                height: 56px;
                border-radius: 50%;
                background: #25D366;
                color: #fff;
                box-shadow: 0 18px 45px rgba(37,211,102,0.35);
                display: grid;
                place-items: center;
                text-decoration: none;
                z-index: 999;
                transition: transform 0.3s ease;
            }

            .whatsapp-btn:hover {
                transform: translateY(-4px) scale(1.04);
            }

            @media (max-width: 768px) {
                nav ul {
                    display: none;
                }

                .hero {
                    text-align: left;
                }

                .hero-content {
                    justify-items: flex-start;
                }

                .hero-actions {
                    justify-content: flex-start;
                }

                .about-media::after {
                    display: none;
                }

                .about-media img {
                    border-radius: 18px;
                }
            }

            @media (max-width: 520px) {
                .whatsapp-btn {
                    right: 1rem;
                    bottom: 1rem;
                    width: 50px;
                    height: 50px;
                }
            }
        </style>
    </head>
    <body>
        <header>
            <div class="container">
                <div class="nav">
                    <a href="#inicio" class="brand">
                        {% if logo_url %}
                            <img src="{{ normalize_drive_image(logo_url) }}" alt="Logo {{ site_name or 'Artesan√≠as' }}" class="logo-img" loading="lazy">
                        {% else %}
                            <span class="logo-placeholder">{{ model_icon or 'üé®' }}</span>
                        {% endif %}
                        <h1>{{ site_name or 'Artesan√≠as locales' }}</h1>
                    </a>
                    <nav>
                        <ul>
                            <li><a href="#inicio">Inicio</a></li>
                            <li><a href="#nosotros">Sobre nosotros</a></li>
                            <li><a href="#productos">Colecci√≥n</a></li>
                            <li><a href="#galeria">Galer√≠a</a></li>
                            <li><a href="#contacto">Contacto</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>

        <main>
            <section id="inicio" class="hero">
                <div class="hero-content">
                    <h2>{{ hero_title or site_name or 'Artesan√≠as que cuentan historias' }}</h2>
                    <p>{{ hero_subtitle or site_description or 'Cada pieza Wayuu preserva la identidad cultural y apoya a las comunidades artesanas.' }}</p>
                    <div class="hero-actions">
                        <a href="#productos" class="btn btn-primary">Explorar colecci√≥n</a>
                        <a href="#contacto" class="btn btn-outline">Quiero contactar</a>
                        {% if whatsapp_number %}
                            <a href="https://wa.me/{{ whatsapp_number | replace('+', '') | replace(' ', '') }}"
                               class="btn btn-whatsapp"
                               target="_blank"
                               rel="noopener"
                               aria-label="Chatear por WhatsApp">
                                <svg viewBox="0 0 24 24" role="img" focusable="false" aria-hidden="true">
                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.1-.472-.148-.672.15-.197.297-.768.966-.94 1.164-.173.199-.347.224-.644.075-.297-.149-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.447-.52.149-.174.198-.298.298-.497.1-.199.05-.373-.025-.522-.075-.149-.672-1.611-.921-2.206-.242-.58-.487-.501-.672-.51l-.573-.01c-.199 0-.522.074-.795.373s-1.05 1.025-1.05 2.499 1.077 2.893 1.227 3.092c.149.199 2.123 3.23 5.145 4.522.719.31 1.281.496 1.718.635.72.23 1.377.197 1.896.12.579-.086 1.758-.719 2.006-1.413.248-.695.248-1.291.173-1.414-.074-.123-.272-.198-.57-.347z" />
                                </svg>
                                <span>WhatsApp directo</span>
                            </a>
                        {% endif %}
                    </div>
                </div>
            </section>

            <section id="nosotros">
                <div class="container">
                    <div class="section-header">
                        <span><i class="fa-solid fa-feather"></i> Tradici√≥n viva</span>
                        <h2>La historia detr√°s de cada tejido</h2>
                        <p>{{ about_text or 'Preservamos el arte ancestral Wayuu garantizando comercio justo y piezas √∫nicas elaboradas a mano.' }}</p>
                    </div>
                    <div class="about-grid">
                        <div class="about-media">
                            <img src="{{ normalize_drive_image(about_image) if about_image else 'https://images.unsplash.com/photo-1560067174-e553b3647601?auto=format&fit=crop&w=900&q=80' }}" alt="Taller artesanal" loading="lazy">
                        </div>
                        <div class="about-content">
                            <p>{{ about_text or 'En cada creaci√≥n Wayuu convergen siglos de tradici√≥n, resiliencia y espiritualidad. Trabajamos de la mano con artesanas l√≠deres para transformar historias en piezas memorables.' }}</p>
                            <div class="about-highlight">
                                ‚ÄúCada color representa un paisaje, cada trama es un legado. Tejemos cultura para el mundo.‚Äù
                            </div>
                            <div class="contact-row">
                                <div class="contact-icon"><i class="fa-solid fa-location-dot"></i></div>
                                <span>{{ contact_address or 'La Guajira - Colombia' }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="productos" style="background: rgba(255,255,255,0.75);">
                <div class="container">
                    <div class="section-header">
                        <span><i class="fa-solid fa-store"></i> Colecci√≥n destacada</span>
                        <h2>Piezas artesanales disponibles</h2>
                        <p>Selecciona los productos que quieres mostrar desde el panel de administraci√≥n. Puedes incluir im√°genes alojadas en Google Drive o cualquier servicio p√∫blico.</p>
                    </div>
                    <div class="products-grid">
                        {% if products and products|length > 0 %}
                            {% for product in products %}
                            <article class="product-card">
                                {% if product.image %}
                                    <div class="product-image">
                                        <img src="{{ normalize_drive_image(product.image) }}" alt="{{ product.name or 'Producto artesanal' }}" loading="lazy">
                                    </div>
                                {% endif %}
                                <div class="product-body">
                                    <h3>{{ product.name or 'Producto artesanal' }}</h3>
                                    {% if product.description %}<p>{{ product.description }}</p>{% endif %}
                                    {% if product.price %}
                                        <div class="product-meta">
                                            <span>{{ product.price }}</span>
                                            <span>Hecho a mano</span>
                                        </div>
                                    {% endif %}
                                </div>
                            </article>
                            {% endfor %}
                        {% else %}
                            <p style="text-align:center; color: var(--muted);">A√±ade productos desde el panel para mostrarlos aqu√≠.</p>
                        {% endif %}
                    </div>
                </div>
            </section>

            <section id="galeria">
                <div class="container">
                    <div class="section-header">
                        <span><i class="fa-solid fa-images"></i> Galer√≠a visual</span>
                        <h2>Momentos y texturas Wayuu</h2>
                        <p>Carga fotograf√≠as de tus procesos, ferias o colecciones para conectar a tus clientes con la experiencia artesanal.</p>
                    </div>
                    <div class="gallery-grid">
                        {% if gallery_images and gallery_images|length > 0 %}
                            {% for image_url in gallery_images %}
                                <div class="gallery-card">
                                    <img src="{{ normalize_drive_image(image_url) }}" alt="Galer√≠a {{ site_name or 'artesan√≠as' }}" loading="lazy">
                                </div>
                            {% endfor %}
                        {% else %}
                            <div class="gallery-card"><span>üé®</span></div>
                            <div class="gallery-card"><span>üß∂</span></div>
                            <div class="gallery-card"><span>üåÖ</span></div>
                            <div class="gallery-card"><span>ü™°</span></div>
                        {% endif %}
                    </div>
                </div>
            </section>

            <section id="contacto" style="background: rgba(139,94,60,0.06);">
                <div class="container">
                    <div class="section-header">
                        <span><i class="fa-solid fa-handshake-angle"></i> Conversemos</span>
                        <h2>Contacto directo con el taller</h2>
                        <p>Comparte tu informaci√≥n de contacto y redes sociales para facilitar pedidos personalizados y alianzas comerciales.</p>
                    </div>
                    <div class="contact-grid">
                        <div class="contact-card">
                            {% if contact_phone %}
                            <div class="contact-row">
                                <div class="contact-icon" aria-hidden="true">‚òé</div>
                                <div>
                                    <strong>Tel√©fono</strong><br>
                                    <a href="tel:{{ contact_phone }}">{{ contact_phone }}</a>
                                </div>
                            </div>
                            {% endif %}
                            {% if contact_email %}
                            <div class="contact-row">
                                <div class="contact-icon" aria-hidden="true">‚úâ</div>
                                <div>
                                    <strong>Email</strong><br>
                                    <a href="mailto:{{ contact_email }}">{{ contact_email }}</a>
                                </div>
                            </div>
                            {% endif %}
                            {% if contact_address %}
                            <div class="contact-row">
                                <div class="contact-icon" aria-hidden="true">üìç</div>
                                <div>
                                    <strong>Ubicaci√≥n</strong><br>
                                    <span>{{ contact_address }}</span>
                                </div>
                            </div>
                            {% endif %}
                            {% if whatsapp_number %}
                            <div class="contact-row">
                                <div class="contact-icon" aria-hidden="true">üí¨</div>
                                <div>
                                    <strong>WhatsApp</strong><br>
                                    <a href="https://wa.me/{{ whatsapp_number | replace('+', '') | replace(' ', '') }}" target="_blank" rel="noopener">Escr√≠benos al {{ whatsapp_number }}</a>
                                </div>
                            </div>
                            {% endif %}
                            {% if whatsapp_number or facebook_url or instagram_url or tiktok_url %}
                            <div>
                                <strong>Redes y canales</strong>
                                <div class="socials">
                                    {% if whatsapp_number %}
                                        <a href="https://wa.me/{{ whatsapp_number | replace('+', '') | replace(' ', '') }}" aria-label="WhatsApp" rel="noopener" target="_blank">
                                            <svg viewBox="0 0 24 24" role="img" focusable="false">
                                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.1-.472-.148-.672.15-.197.297-.768.966-.94 1.164-.173.199-.347.224-.644.075-.297-.149-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.447-.52.149-.174.198-.298.298-.497.1-.199.05-.373-.025-.522-.075-.149-.672-1.611-.921-2.206-.242-.58-.487-.501-.672-.51l-.573-.01c-.199 0-.522.074-.795.373s-1.05 1.025-1.05 2.499 1.077 2.893 1.227 3.092c.149.199 2.123 3.23 5.145 4.522.719.31 1.281.496 1.718.635.72.23 1.377.197 1.896.12.579-.086 1.758-.719 2.006-1.413.248-.695.248-1.291.173-1.414-.074-.123-.272-.198-.57-.347z"/>
                                            </svg>
                                        </a>
                                    {% endif %}
                                    {% if facebook_url %}
                                        <a href="{{ facebook_url }}" aria-label="Facebook" rel="noopener" target="_blank">
                                            <svg viewBox="0 0 24 24" role="img" focusable="false">
                                                <path d="M22 12a10 10 0 1 0-11.56 9.88v-6.99H7.9V12h2.54V9.79c0-2.5 1.49-3.89 3.78-3.89 1.1 0 2.25.2 2.25.2v2.47h-1.27c-1.25 0-1.64.78-1.64 1.57V12h2.8l-.45 2.89h-2.35v6.99A10 10 0 0 0 22 12z"/>
                                            </svg>
                                        </a>
                                    {% endif %}
                                    {% if instagram_url %}
                                        <a href="{{ instagram_url }}" aria-label="Instagram" rel="noopener" target="_blank">
                                            <svg viewBox="0 0 24 24" role="img" focusable="false">
                                                <path d="M12 7.09A4.91 4.91 0 1 0 16.91 12 4.91 4.91 0 0 0 12 7.09zm0 8.09A3.18 3.18 0 1 1 15.18 12 3.18 3.18 0 0 1 12 15.18zm5-8.51a1.15 1.15 0 1 1-1.15-1.15 1.15 1.15 0 0 1 1.15 1.15zm3.26 1.17a5.66 5.66 0 0 0-1.55-4 5.66 5.66 0 0 0-4-1.55c-1.58-.09-6.34-.09-7.92 0a5.66 5.66 0 0 0-4 1.55 5.66 5.66 0 0 0-1.55 4c-.09 1.58-.09 6.34 0 7.92a5.66 5.66 0 0 0 1.55 4 5.66 5.66 0 0 0 4 1.55c1.58.09 6.34.09 7.92 0a5.66 5.66 0 0 0 4-1.55 5.66 5.66 0 0 0 1.55-4c.09-1.58.09-6.34 0-7.92zm-2.05 9.6a3.23 3.23 0 0 1-1.82 1.82c-1.26.5-4.25.38-5.39.38s-4.13.11-5.39-.38a3.23 3.23 0 0 1-1.82-1.82c-.5-1.26-.38-4.25-.38-5.39s-.11-4.13.38-5.39a3.23 3.23 0 0 1 1.82-1.82c1.26-.5 4.25-.38 5.39-.38s4.13-.11 5.39.38a3.23 3.23 0 0 1 1.82 1.82c.5 1.26.38 4.25.38 5.39s.12 4.13-.38 5.39z"/>
                                            </svg>
                                        </a>
                                    {% endif %}
                                    {% if tiktok_url %}
                                        <a href="{{ tiktok_url }}" aria-label="TikTok" rel="noopener" target="_blank">
                                            <svg viewBox="0 0 24 24" role="img" focusable="false">
                                                <path d="M19.59 7.24a5.35 5.35 0 0 1-3.16-1.01 5.34 5.34 0 0 1-1.92-2.57h-.01a5.46 5.46 0 0 1-.22-1.07H11.2v11.8a2.18 2.18 0 1 1-1.53-2.08v-2.2a4.49 4.49 0 1 0 4.49 4.49V9.33a8.03 8.03 0 0 0 4.94 1.66V7.24z"/>
                                            </svg>
                                        </a>
                                    {% endif %}
                                </div>
                            </div>
                            {% endif %}
                        </div>
                        <div class="contact-card" style="background: rgba(255,255,255,0.65);">
                            <h3 style="margin: 0; color: var(--primary);">Pedidos especiales</h3>
                            <p style="color: var(--muted); margin: 0;">¬øQuieres piezas personalizadas o compras al por mayor? Escr√≠benos y te asesoramos.</p>
                            <div style="margin-top: 1rem; display: grid; gap: 0.8rem;">
                                <div class="contact-row">
                                    <div class="contact-icon" aria-hidden="true">‚úî</div>
                                    <span>Pagos seguros y env√≠os nacionales</span>
                                </div>
                                <div class="contact-row">
                                    <div class="contact-icon" aria-hidden="true">ü§ù</div>
                                    <span>Trabajo directo con comunidades artesanas</span>
                                </div>
                                <div class="contact-row">
                                    <div class="contact-icon" aria-hidden="true">üåé</div>
                                    <span>Exportaci√≥n disponible bajo pedido</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% if contact_address %}
                    <div class="map-card">
                        <iframe
                            title="Mapa de {{ site_name or 'ubicaci√≥n' }}"
                            loading="lazy"
                            allowfullscreen
                            referrerpolicy="no-referrer-when-downgrade"
                            src="https://www.google.com/maps?q={{ contact_address | urlencode }}&output=embed"></iframe>
                        <div class="map-footer">
                            <div>
                                <strong>¬øC√≥mo llegar?</strong><br>
                                {{ contact_address }}
                            </div>
                            <a href="https://www.google.com/maps/search/?api=1&query={{ contact_address | urlencode }}" target="_blank" rel="noopener">Abrir en Google Maps ‚Üí</a>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </section>
        </main>

        <footer>
            <div class="container">
                {% set allies = supporter_logos or [] %}
                {% if allies %}
                <div class="supporters">
                    <h3>Aliados que apoyan esta causa</h3>
                    <div class="supporters-logos">
                        {% for supporter in allies %}
                            <div class="supporter-badge">
                                {% if supporter.optimized_url or supporter.url %}
                                    <img src="{{ supporter.optimized_url or supporter.url }}"
                                         alt="Logo {{ supporter.name }}"
                                         width="180"
                                         height="72"
                                         loading="lazy"
                                         decoding="async"
                                         data-supporter-logo
                                         data-supporter-name="{{ supporter.name }}">
                                {% endif %}
                                <span class="supporter-fallback" {% if supporter.optimized_url or supporter.url %}hidden{% endif %}>{{ supporter.initials }}</span>
                            </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
                <div>{{ site_name or 'Artesan√≠as locales' }} &mdash; {{ site_description or 'Tejidos aut√©nticos hechos a mano.' }}</div>
                <small>&copy; {{ current_year }} {{ site_name or 'Artesan√≠as locales' }}. Todos los derechos reservados.</small>
            </div>
        </footer>

        {% if whatsapp_number %}
        <a class="whatsapp-btn" href="https://wa.me/{{ whatsapp_number | replace('+', '') | replace(' ', '') }}" target="_blank" rel="noopener" aria-label="Contactar por WhatsApp">
            <svg viewBox="0 0 24 24" role="img" focusable="false" aria-hidden="true">
                <path d="M12.01 2a9.9 9.9 0 0 0-8.47 14.92L2 22l5.2-1.5A9.93 9.93 0 1 0 12.01 2zm0 2a7.9 7.9 0 0 1 6.77 12.12l-.26.39A7.9 7.9 0 0 1 7.24 18l-.4-.25A7.9 7.9 0 0 1 12 4zm4.21 9.94c-.23-.12-1.36-.74-1.57-.82-.21-.08-.37-.12-.52.12-.16.24-.6.77-.73.92-.13.15-.26.18-.48.06-.22-.11-.93-.34-1.78-1.09-.66-.59-1.11-1.33-1.24-1.56-.13-.23-.01-.35.09-.47.09-.09.2-.27.3-.4.1-.13.13-.23.2-.39.07-.16.03-.29-.02-.41-.05-.12-.5-1.2-.68-1.64-.18-.43-.36-.37-.52-.38l-.44-.01c-.16 0-.4.05-.61.28-.21.24-.8.78-.8 1.89s.82 2.19.93 2.34c.11.15 1.61 2.44 3.9 3.42.54.23.97.37 1.3.48.54.17 1.05.15 1.44.09.44-.07 1.34-.54 1.53-1.05.19-.52.19-.96.13-1.05-.05-.09-.21-.15-.43-.26z" fill="currentColor" />
            </svg>
        </a>
        {% endif %}

        <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.querySelectorAll('[data-supporter-logo]').forEach(function (img) {
                img.addEventListener('error', function () {
                    const wrapper = img.closest('.supporter-badge');
                    if (!wrapper) {
                        return;
                    }
                    const fallback = wrapper.querySelector('.supporter-fallback');
                    img.remove();
                    if (fallback) {
                        fallback.hidden = false;
                        fallback.style.display = 'flex';
                    }
                }, { once: true });
            });
        });
        </script>
        <script src="tracking.js" defer></script>
    </body>
    </html>
