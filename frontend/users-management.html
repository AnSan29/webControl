<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Usuarios y Roles - WebControl Studio</title>

	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

	<style>
		@keyframes enter {
			from { opacity: 0; transform: translateY(6px); }
			to { opacity: 1; transform: translateY(0); }
		}
		.fade-in { animation: enter 0.35s ease-out; }
		.card { box-shadow: 0 25px 50px -12px rgb(15 23 42 / 0.15); }
	</style>
</head>
<body class="bg-gray-50">

<!-- Top navbar -->
<nav class="bg-white border-b border-gray-200 fixed z-30 w-full">
	<div class="px-3 py-3 lg:px-5 lg:pl-3">
		<div class="flex items-center justify-between">
			<div class="flex items-center justify-start">
				<button id="toggleSidebarMobile" aria-expanded="true" aria-controls="sidebar" class="lg:hidden mr-2 text-gray-600 hover:text-gray-900 cursor-pointer p-2 hover:bg-gray-100 focus:bg-gray-100 focus:ring-2 focus:ring-gray-100 rounded">
					<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
						<path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
					</svg>
				</button>
				<a href="/dashboard" class="text-xl font-bold flex items-center lg:ml-2.5">
					<i class="fas fa-users-gear text-blue-600 mr-2"></i>
					<span class="self-center whitespace-nowrap">WebControl Studio</span>
				</a>
			</div>
			<div class="flex items-center">
				<button id="userMenuButton" type="button" class="flex text-sm bg-gray-800 rounded-full focus:ring-4 focus:ring-gray-300">
					<span class="sr-only">Abrir menú de usuario</span>
					<div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white">
						<i class="fas fa-user"></i>
					</div>
				</button>
				<div id="userMenu" class="hidden z-50 my-4 text-base list-none bg-white rounded divide-y divide-gray-100 shadow absolute right-0 top-12">
					<div class="py-3 px-4">
						<span class="block text-sm text-gray-900" id="userName">Admin</span>
						<span class="block text-sm font-medium text-gray-500 truncate" id="userEmail">admin@webcontrol.com</span>
					</div>
					<ul class="py-1">
						<li><a href="/" class="block py-2 px-4 text-sm text-gray-700 hover:bg-gray-100">Cerrar sesión</a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</nav>

<!-- Sidebar -->
<aside id="sidebar" class="fixed hidden z-20 h-full top-0 left-0 pt-16 lg:flex flex-shrink-0 flex-col w-64 transition-width duration-75" aria-label="Sidebar">
	<div class="relative flex-1 flex flex-col min-h-0 border-r border-gray-200 bg-white pt-0">
		<div class="flex-1 flex flex-col pt-5 pb-4 overflow-y-auto">
			<div class="flex-1 px-3 bg-white divide-y space-y-1">
				<ul class="space-y-2 pb-2">
					<li>
						<a href="/dashboard" class="text-base text-gray-900 font-normal rounded-lg hover:bg-gray-100 flex items-center p-2 group">
							<i class="fa-solid fa-gauge w-6 h-6 text-gray-500 group-hover:text-gray-900"></i>
							<span class="ml-3">Dashboard</span>
						</a>
					</li>
					<li>
						<a href="/create-site" class="text-base text-gray-900 font-normal rounded-lg hover:bg-gray-100 flex items-center p-2 group">
							<i class="fa-solid fa-circle-plus w-6 h-6 text-gray-500 group-hover:text-gray-900"></i>
							<span class="ml-3">Crear Sitio</span>
						</a>
					</li>
					<li>
						<a href="/models" class="text-base text-gray-900 font-normal rounded-lg hover:bg-gray-100 flex items-center p-2 group">
							<i class="fa-solid fa-layer-group w-6 h-6 text-gray-500 group-hover:text-gray-900"></i>
							<span class="ml-3">Modelos</span>
						</a>
					</li>
					<li>
						<span class="text-base text-blue-700 font-semibold rounded-lg flex items-center p-2 bg-blue-50 border border-blue-100">
							<i class="fa-solid fa-users w-6 h-6 text-blue-500"></i>
							<span class="ml-3">Usuarios y Roles</span>
						</span>
					</li>
				</ul>
				<div class="space-y-2 pt-2">
					<a href="https://github.com/AnSan29/webControl" target="_blank" class="text-base text-gray-900 font-normal rounded-lg hover:bg-gray-100 flex items-center p-2 group">
						<i class="fab fa-github w-6 h-6 text-gray-500 group-hover:text-gray-900"></i>
						<span class="ml-3">GitHub</span>
					</a>
					<a href="#" class="text-base text-gray-900 font-normal rounded-lg hover:bg-gray-100 flex items-center p-2 group">
						<i class="fas fa-book w-6 h-6 text-gray-500 group-hover:text-gray-900"></i>
						<span class="ml-3">Documentación</span>
					</a>
				</div>
			</div>
		</div>
	</div>
</aside>

<div class="bg-gray-900 opacity-50 hidden fixed inset-0 z-10" id="sidebarBackdrop"></div>

<!-- Main content -->
<div class="flex overflow-hidden bg-white pt-16">
	<div id="main-content" class="h-full w-full bg-gray-50 relative overflow-y-auto lg:ml-64">
		<main>
			<div class="pt-6 px-4 space-y-6">
				<section class="bg-white card rounded-2xl p-6 border border-blue-100">
					<div class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
						<div>
							<p class="inline-flex items-center px-3 py-1 text-xs font-semibold uppercase tracking-wide bg-blue-50 text-blue-700 rounded-full">Beta privada</p>
							<h1 class="text-3xl font-bold text-gray-900 mt-3">Gestión de Usuarios y Roles</h1>
							<p class="mt-2 text-gray-600 max-w-2xl">Centraliza la administración del equipo, define roles reutilizables y prepara los permisos que conectarán con el backend de FastAPI.</p>
						</div>
						<div class="flex gap-2">
							<a href="/dashboard" class="inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50">
								<i class="fa-solid fa-arrow-left mr-2"></i>Volver al dashboard
							</a>
						</div>
					</div>
				</section>

				<section class="grid gap-4 md:grid-cols-3">
					<article class="bg-white rounded-2xl border border-gray-100 p-5 fade-in">
						<div class="flex items-center gap-3">
							<span class="h-10 w-10 rounded-full bg-blue-50 flex items-center justify-center text-blue-600"><i class="fa-solid fa-users-gear"></i></span>
							<div>
								<p class="text-sm text-gray-500">Estado actual</p>
								<p class="text-lg font-semibold text-gray-900">Diseño listo</p>
							</div>
						</div>
						<p class="mt-3 text-sm text-gray-600">El frontend ya incluye navegación, estructura y componentes base para roles. Falta conectar la API.</p>
					</article>
					<article class="bg-white rounded-2xl border border-gray-100 p-5 fade-in">
						<div class="flex items-center gap-3">
							<span class="h-10 w-10 rounded-full bg-emerald-50 flex items-center justify-center text-emerald-600"><i class="fa-solid fa-user-shield"></i></span>
							<div>
								<p class="text-sm text-gray-500">Próximo sprint</p>
								<p class="text-lg font-semibold text-gray-900">API de roles</p>
							</div>
						</div>
						<p class="mt-3 text-sm text-gray-600">Los endpoints vivirán en <code class="bg-gray-100 px-1 rounded">/backend/routers/roles.py</code>. Este módulo ya existe como placeholder.</p>
					</article>
					<article class="bg-white rounded-2xl border border-gray-100 p-5 fade-in">
						<div class="flex items-center gap-3">
							<span class="h-10 w-10 rounded-full bg-amber-50 flex items-center justify-center text-amber-600"><i class="fa-solid fa-list-check"></i></span>
							<div>
								<p class="text-sm text-gray-500">Checklist</p>
								<p class="text-lg font-semibold text-gray-900">Conexiones pendientes</p>
							</div>
						</div>
						<ul class="mt-3 space-y-1 text-sm text-gray-600 list-disc list-inside">
							<li>Definir esquema Pydantic para usuarios/roles.</li>
							<li>Crear endpoints CRUD y protegerlos con OAuth2.</li>
							<li>Consumir la nueva API desde esta vista.</li>
						</ul>
					</article>
				</section>

				<section class="bg-white rounded-2xl border border-gray-100 p-6">
					<div class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
						<div>
							<h2 class="text-xl font-semibold text-gray-900">Roles predefinidos</h2>
							<p class="text-sm text-gray-500">Matriz sugerida para implementar permisos mínimos viables.</p>
						</div>
						<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-indigo-50 text-indigo-700">
							<i class="fa-solid fa-lock mr-2"></i> Diseño funcional
						</span>
					</div>

					<div class="mt-6 overflow-x-auto">
						<table class="min-w-full divide-y divide-gray-200 text-sm">
							<thead class="bg-gray-50">
								<tr>
									<th class="px-4 py-3 text-left font-semibold text-gray-500 uppercase tracking-wide">Rol</th>
									<th class="px-4 py-3 text-left font-semibold text-gray-500 uppercase tracking-wide">Permisos clave</th>
									<th class="px-4 py-3 text-left font-semibold text-gray-500 uppercase tracking-wide">Uso recomendado</th>
								</tr>
							</thead>
							<tbody class="bg-white divide-y divide-gray-100">
								<tr>
									<td class="px-4 py-4">
										<p class="font-semibold text-gray-900">Administrador</p>
										<p class="text-xs text-gray-500">Acceso total</p>
									</td>
									<td class="px-4 py-4 text-gray-600">CRUD de usuarios y roles, publicación de sitios, configuración avanzada.</td>
									<td class="px-4 py-4 text-gray-600">Equipo core o founders.</td>
								</tr>
								<tr>
									<td class="px-4 py-4">
										<p class="font-semibold text-gray-900">Editor</p>
										<p class="text-xs text-gray-500">Contenido</p>
									</td>
									<td class="px-4 py-4 text-gray-600">Editar sitios, subir assets, generar vistas previas.</td>
									<td class="px-4 py-4 text-gray-600">Equipo creativo o agencias aliadas.</td>
								</tr>
								<tr>
									<td class="px-4 py-4">
										<p class="font-semibold text-gray-900">Revisor</p>
										<p class="text-xs text-gray-500">Solo lectura</p>
									</td>
									<td class="px-4 py-4 text-gray-600">Ver dashboard, descargar reportes, comentar incidencias.</td>
									<td class="px-4 py-4 text-gray-600">Stakeholders, QA o clientes.</td>
								</tr>
							</tbody>
						</table>
					</div>
				</section>

				<section class="grid gap-4 md:grid-cols-2">
					<article class="bg-white rounded-2xl border border-gray-100 p-6">
						<h3 class="text-lg font-semibold text-gray-900 mb-3">Roadmap sugerido</h3>
						<ol class="space-y-3 text-sm text-gray-600 list-decimal list-inside">
							<li>Completar los routers de <code class="bg-gray-100 px-1 rounded">backend/routers</code>.</li>
							<li>Agregar modelos SQLAlchemy para usuarios y roles.</li>
							<li>Conectar esta pantalla usando `fetch` al nuevo backend.</li>
							<li>Aplicar `data-requires-admin` para mostrar/ocultar secciones.</li>
						</ol>
					</article>
					<article class="bg-white rounded-2xl border border-gray-100 p-6">
						<h3 class="text-lg font-semibold text-gray-900 mb-3">Notas rápidas</h3>
						<ul class="space-y-2 text-sm text-gray-600">
							<li class="flex items-start gap-2"><i class="fa-solid fa-circle-check text-green-500 mt-1"></i><span>Estructura reutiliza el layout Windster para mantener consistencia.</span></li>
							<li class="flex items-start gap-2"><i class="fa-solid fa-circle-check text-green-500 mt-1"></i><span>Todos los botones son accesibles con teclado y tienen focus rings.</span></li>
							<li class="flex items-start gap-2"><i class="fa-solid fa-circle-info text-indigo-500 mt-1"></i><span>Este módulo aún no consume datos reales; funciona como prototipo navegable.</span></li>
						</ul>
					</article>
				</section>
			</div>
		</main>
	</div>
</div>

<script>
	const toggleSidebarMobile = document.getElementById('toggleSidebarMobile');
	const sidebar = document.getElementById('sidebar');
	const sidebarBackdrop = document.getElementById('sidebarBackdrop');
	const userMenuButton = document.getElementById('userMenuButton');
	const userMenu = document.getElementById('userMenu');

	toggleSidebarMobile?.addEventListener('click', () => {
		sidebar?.classList.toggle('hidden');
		sidebarBackdrop?.classList.toggle('hidden');
	});

	sidebarBackdrop?.addEventListener('click', () => {
		sidebar?.classList.add('hidden');
		sidebarBackdrop?.classList.add('hidden');
	});

	userMenuButton?.addEventListener('click', (event) => {
		event.stopPropagation();
		userMenu?.classList.toggle('hidden');
	});

	document.addEventListener('click', (event) => {
		if (!userMenu?.contains(event.target) && !userMenuButton?.contains(event.target)) {
			userMenu?.classList.add('hidden');
		}
	});
</script>

</body>
</html>
